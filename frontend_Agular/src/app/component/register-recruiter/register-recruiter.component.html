<!-- Sign Up form -->
<div class="signup-page">
  <form
    [formGroup]="registrationForm"
    (ngSubmit)="handleCandidateRegistration()"
  >
    <h3 *ngIf="!isEdit">{{ "change-role.recruiter" | translate }}</h3>
    <h3 *ngIf="isEdit">{{ "change-update.recruiter" | translate }}</h3>

    <!-- Pour le champ 'name' -->
    <div class="form-group">
      <label for="name" class="name">
        {{ "change-name" | translate }}<span class="required-field">*</span>
      </label>
      <input
        type="text"
        class="form-control"
        placeholder="{{ 'change-name' | translate }}"
        formControlName="name"
        [class.is-invalid]="name?.invalid && (name?.dirty || name?.touched)"
      />
      <div
        *ngIf="name?.invalid && (name?.dirty || name?.touched)"
        class="error-message"
      >
        <div *ngIf="name?.errors?.['required']">
          {{ "this-field-is-required" | translate }}
        </div>
        <div *ngIf="name?.errors?.['minlength']">
          {{ "name-must-be-at-least-2-characters-long" | translate }}
        </div>
        <div *ngIf="name?.errors?.['maxlength']">
          {{ "name-must-be-at-least-70-characters-long" | translate }}
        </div>
      </div>
    </div>
    <!-- End 'name' -->

    <!-- Pour le champ 'firstname' -->
    <div class="form-group">
      <label for="firstname" class="name">
        {{ "change-firstname" | translate
        }}<span class="required-field">*</span>
      </label>
      <input
        type="text"
        class="form-control"
        placeholder="{{ 'change-firstname' | translate }}"
        formControlName="firstname"
        [class.is-invalid]="
          firstname?.invalid && (firstname?.dirty || firstname?.touched)
        "
      />
      <div
        *ngIf="firstname?.invalid && (firstname?.dirty || firstname?.touched)"
        class="error-message"
      >
        <div *ngIf="firstname?.errors?.['required']">
          {{ "this-field-is-required" | translate }}
        </div>
        <div *ngIf="firstname?.errors?.['minlength']">
          {{ "firstname-must-be-at-least-2-characters-long" | translate }}
        </div>
        <div *ngIf="firstname?.errors?.['maxlength']">
          {{ "firstname-must-be-less-than-70-characters-long" | translate }}
        </div>
      </div>
    </div>
    <!-- End 'firstname' -->
    <!-- Pour le champ 'dateBirth' -->
    <div class="form-group">
      <label for="dateBirth" class="name">
        {{ "change-birthday" | translate }}<span class="required-field">*</span>
      </label>
      <input
        type="date"
        class="form-control"
        id="dateBirth"
        placeholder="Date"
        formControlName="dateBirth"
        [class.is-invalid]="
          dateBirth?.invalid && (dateBirth?.dirty || dateBirth?.touched)
        "
      />
      <div
        *ngIf="dateBirth?.invalid && (dateBirth?.dirty || dateBirth?.touched)"
        class="error-message"
      >
        <div *ngIf="dateBirth?.errors?.['required']">
          {{ "this-field-is-required" | translate }}
        </div>
      </div>
    </div>
    <!-- End 'dateBirth' -->

    <!-- Pour le champ 'sex' -->
    <div class="form-group">
      <label for="sex" class="name">
        {{ "change-gender" | translate }}<span class="required-field">*</span>
      </label>
      <div class="col-md-6 mb-4">
        <select
          class="select"
          formControlName="sex"
          id="sex"
          [class.is-invalid]="sex?.invalid && (sex?.dirty || sex?.touched)"
        >
          <option value="" disabled selected>
            {{ "change-choice" | translate }}
          </option>
          <option value="F">{{ "change-female" | translate }}</option>
          <option value="M">{{ "change-male" | translate }}</option>
        </select>
      </div>
      <div
        *ngIf="sex?.invalid && (sex?.dirty || sex?.touched)"
        class="error-message"
      >
        <div *ngIf="sex?.errors?.['required']">
          {{ "this-field-is-required" | translate }}
        </div>
        <div *ngIf="sex?.errors?.['maxlength']">
          {{ "Invalid-selection" | translate }}
        </div>
      </div>
    </div>
    <!-- End 'sex' -->
    <!-- Dysplay Error message -->
    <p class="error-message" *ngIf="errorMessage">
      {{ errorMessage | translate }}
    </p>
    <!-- End Dysplay Error message -->

    <!-- Pour le champ 'phoneNumber' -->
    <div class="form-group">
      <label for="phoneNumber" class="name">
        {{ "change-phone-number" | translate
        }}<span class="required-field">*</span></label
      >
      <input
        type="text"
        class="form-control"
        placeholder="{{ 'change-phone-number' | translate }}"
        formControlName="phoneNumber"
        id="phoneNumber"
        [class.is-invalid]="
          phoneNumber?.invalid && (phoneNumber?.dirty || phoneNumber?.touched)
        "
      />
      <div
        *ngIf="
          phoneNumber?.invalid && (phoneNumber?.dirty || phoneNumber?.touched)
        "
        class="error-message"
      >
        <div *ngIf="phoneNumber?.errors?.['required']">
          {{ "this-field-is-required" | translate }}
        </div>
        <div *ngIf="phoneNumber?.errors?.['pattern']">
          {{ "invalid-phone-number-format" | translate }}
        </div>
      </div>
    </div>
    <!-- End 'phoneNumber' -->

    <!-- Pour le champ 'email' -->
    <div class="form-group" *ngIf="!isEdit">
      <label for="email" class="name"
        >Email<span class="required-field">*</span></label
      >
      <input
        type="email"
        class="form-control"
        placeholder="Email"
        formControlName="email"
        [class.is-invalid]="email?.invalid && (email?.dirty || email?.touched)"
        id="email"
      />
      <div
        *ngIf="email?.invalid && (email?.dirty || email?.touched)"
        class="error-message"
      >
        <div *ngIf="email?.errors?.['required']">
          {{ "this-field-is-required" | translate }}
        </div>
        <div *ngIf="email?.errors?.['email']">
          {{ "please-enter-a-valid-email-address" | translate }}
        </div>
        <div *ngIf="email?.errors?.['maxlength']">
          {{ "email-can-be-maximum-70-characters-long" | translate }}
        </div>
        <div *ngIf="email?.errors?.['pattern']">
          {{ "errors.emailInvalid" | translate }}
        </div>
      </div>
    </div>
    <!-- End 'email' -->

    <!-- Pour le champ 'password' -->
    <div class="col-12" *ngIf="!isEdit">
      <label for="password" class="name">
        {{ "change-login.password" | translate
        }}<span class="required-field">*</span>
      </label>
      <div class="input-group">
        <input
          [type]="showPassword ? 'text' : 'password'"
          class="form-control"
          placeholder="{{ 'change-login.password' | translate }}"
          formControlName="password"
          [class.is-invalid]="
            password?.invalid && (password?.dirty || password?.touched)
          "
          id="password"
        />
        <span class="input-group-text icone" (click)="toggleShowPassword()">
          <i
            class="fas"
            [class.fa-eye]="!showPassword"
            [class.fa-eye-slash]="showPassword"
          ></i>
        </span>
      </div>
      <!-- Affichage des messages d'erreur -->
      <div
        *ngIf="password?.invalid && (password?.dirty || password?.touched)"
        class="error-message"
      >
        <div *ngIf="password?.errors?.['required']">
          {{ "this-field-is-required" | translate }}
        </div>
        <div *ngIf="password?.errors?.['maxlength']">
          {{ "password-cannot-be-more-than-250-characters-long" | translate }}
        </div>
        <div *ngIf="password?.errors?.['pattern']">
          {{ "errors.passwordRequirements" | translate }}
        </div>
      </div>
    </div>
    <!-- End 'password' -->

    <!-- Pour le champ 'nameCompany' -->
    <div class="form-group">
      <label for="nameCompany" class="name">
        {{ "change-nameCompany" | translate
        }}<span class="required-field">*</span>
      </label>
      <input
        type="text"
        class="form-control"
        placeholder="{{ 'change-nameCompany' | translate }}"
        formControlName="nameCompany"
        [class.is-invalid]="
          nameCompany?.invalid && (nameCompany?.dirty || nameCompany?.touched)
        "
        id="nameCompany"
      />
      <div *ngIf=" nameCompany?.invalid && (nameCompany?.dirty || nameCompany?.touched)"
      class="error-message">
        <div *ngIf="nameCompany?.errors?.['required']">
          {{ "this-field-is-required" | translate }}
        </div>
        <div *ngIf="nameCompany?.errors?.['minlength']">
          {{ "nameCompany-must-be-at-least-2-characters-long" | translate }}
        </div>
        <div *ngIf="nameCompany?.errors?.['maxlength']">
          {{ "nameCompany-must-be-at-least-70-characters-long" | translate }}
        </div>
      </div>
    </div>
    <!-- End 'nameCompany' -->

    
    <!-- Pour le champ 'tvaNumber' -->
    <div class="form-group">
      <label for="tvaNumber" class="name">
        {{ "change-tvaNumber-number" | translate
        }}<span class="required-field">*</span></label
      >
      <input
        type="text"
        class="form-control"
        placeholder="{{ 'change-tvaNumber-number' | translate }}"
        formControlName="tvaNumber"
        id="tvaNumber"
        [class.is-invalid]="
          tvaNumber?.invalid && (tvaNumber?.dirty || tvaNumber?.touched)
        "
      />
      <div
        *ngIf="tvaNumber?.invalid && (tvaNumber?.dirty || tvaNumber?.touched)"
        class="error-message"
      >
        <div *ngIf="tvaNumber?.errors?.['required']">
          {{ "this-field-is-required" | translate }}
        </div>
        <div *ngIf="tvaNumber?.errors?.['pattern']">
          {{ "invalid-tvaNumber-number-format" | translate }}
        </div>
      </div>
    </div>
    <!-- End 'tvaNumber' -->
    
     <!-- Start 'descriptionCompany' -->
    <div class="form-group">
      <div class="container mt-3">
       
          <div class="mb-3">
            <label for="descriptionCompany" class="name">
              {{ "change-description-compagny" | translate
              }}<span class="required-field">*</span></label
            >
            <textarea class="form-control"
                      id="descriptionCompany"
                      formControlName="descriptionCompany"
                      rows="4"
                      placeholder="{{ 'change-enter-description' | translate }}"
                      [class.is-invalid]="
                      descriptionCompany?.invalid && (descriptionCompany?.dirty || descriptionCompany?.touched)
                    "></textarea>
            <!-- Messages d'erreur pour la validation -->
            <div *ngIf=" descriptionCompany?.invalid && (descriptionCompany?.dirty || descriptionCompany?.touched)"
      class="error-message">
        <div *ngIf="descriptionCompany?.errors?.['required']">
          {{ "this-field-is-required" | translate }}
        </div>
        <div *ngIf="descriptionCompany?.errors?.['minlength']">
          {{ "descriptionCompany-must-be-at-least-10-characters-long" | translate }}
        </div>
        <div *ngIf="descriptionCompany?.errors?.['maxlength']">
          {{ "descriptionCompany-must-be-at-least-1500-characters-long" | translate }}
        </div>
      </div>
          </div>
      </div>
    </div>
     <!-- End 'descriptionCompany' -->

    <!-- Pour le champ 'adresseCompany' -->
    <div class="form-group">
      <label for="addressCompany" class="name"
        >{{ "change-addressCompany" | translate
        }}<span class="required-field">*</span></label
      >
      <input
        type="text"
        class="form-control"
        placeholder="{{ 'change-address' | translate }}"
        formControlName="addressCompany"
        [class.is-invalid]="
          addressCompany?.invalid &&
          (addressCompany?.dirty || addressCompany?.touched)
        "
        id="addressCompany"
      />
      <div
        *ngIf="
          addressCompany?.invalid &&
          (addressCompany?.dirty || addressCompany?.touched)
        "
        class="error-message"
      >
        <div *ngIf="addressCompany?.errors?.['required']">
          {{ "this-field-is-required" | translate }}
          <div *ngIf="addressCompany?.errors?.['minlength']">
            {{ "address-must-be-at-least-2-characters-long" | translate }}
          </div>
          <div *ngIf="addressCompany?.errors?.['maxlength']">
            {{ "address-must-be-at-least-70-characters-long" | translate }}
          </div>
        </div>
      </div>
    </div>
    <!-- End 'addressCompagny' -->

    <br />
    <div
      *ngIf="!isEdit"
      style="display: flex; width: 100%; max-width: 600px; margin: auto"
    >
      <button
        class="save-button"
        mat-raised-button
        type="submit"
        style="flex-grow: 1; margin-right: 4px"
      >
        <span class="material-icons">save</span>
        {{'change-save' | translate}}
      </button>
      <button
        (click)="redirectToHome()"
        class="btn-save"
        mat-raised-button
        style="flex-grow: 1; margin-left: 4px"
      >
        <span class="material-icons">cancel</span>
        {{'change-close' | translate}}
      </button>
    </div>

    <hr />
    <div *ngIf="!isEdit" class="form-group">
      <p class="text-center">
        {{ "change-have-account?" | translate }}
        <a href="/signin"> {{ "change-language.login" | translate }}</a>
      </p>
    </div>

    <div *ngIf="isEdit" class="update-div">
      <button
        class="save-button"
        mat-raised-button
        type="submit"
        style="flex-grow: 1; margin-right: 4px"
      >
        <span class="material-icons">edit</span>
         {{'save' | translate}}
      </button>
      <button
        class="btn-save"
        mat-raised-button
        [mat-dialog-close]="false"
        style="flex-grow: 1; margin-left: 4px"
      >
        <span class="material-icons">cancel</span>
        {{'change-close' | translate}}
      </button>
    </div>
  </form>
</div>
